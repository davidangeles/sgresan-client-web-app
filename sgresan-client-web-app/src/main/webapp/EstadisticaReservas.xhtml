<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./vista/Plantilla_main_1.xhtml">

            <ui:define name="titulo">
                Estadisticas Reservas
            </ui:define>

            <ui:define name="top">                 
            </ui:define>

            <ui:define name="content">
            
                <h:form id="form_GraficosReservas">
				<div class="row ">
					<h4 class="form-group col-md-12 col-sm-12 col-xs-12 text-center">FILTRO</h4>
					<div class="form-group col-md-2 col-sm-2 col-xs-3">
						<p:outputLabel value="Ver por" />
					</div>
					<div class="form-group col-md-2 col-sm-2 col-xs-3">
						<p:selectOneMenu value="#{graficosEstBean.filtroBusqueda.parameterInteger1}" >
							<f:selectItem itemLabel="Día" itemValue="1" />
							<f:selectItem itemLabel="Mes" itemValue="2" />
							<f:selectItem itemLabel="Año" itemValue="3" />
						</p:selectOneMenu>
					</div>
					<div class="form-group col-md-2 col-sm-2 col-xs-3">						
						<p:outputLabel value="Fecha Inicio"/>
					</div>
					<div class="form-group col-md-2 col-sm-2 col-xs-3">
						<p:calendar pattern="dd/MM/yyyy" required="false" value="#{graficosEstBean.filtroBusqueda.fechaInicio}" locale="es"/>
					</div>
					<div class="form-group col-md-2 col-sm-2 col-xs-3">						
						<p:outputLabel value="Fecha Fin"/>
					</div>
					<div class="form-group col-md-2 col-sm-2 col-xs-3">
						<p:calendar pattern="dd/MM/yyyy" required="false" value="#{graficosEstBean.filtroBusqueda.fechaFin}" locale="es"/>
					</div>
					<div class="form-group col-md-2 col-sm-2 col-xs-3">
						<p:outputLabel value="Estado de Reserva" />
					</div>
					<div class="form-group col-md-2 col-sm-2 col-xs-3">
						<p:selectCheckboxMenu id="multiple" value="#{graficosEstBean.filtroBusqueda.selectedString1}" filter="true" filterMatchMode="startsWith" label="&nbsp;">
							<f:selectItems value="#{graficosEstBean.lstEstadoReserva}" var="est" itemLabel="#{est.nombre}" itemValue="#{est.nombre}"/> 
						</p:selectCheckboxMenu>
					</div>
					<div class="form-group col-md-2 col-sm-2 col-xs-3">
						<p:outputLabel value="Tipo Habitación" />
					</div>
					<div class="form-group col-md-2 col-sm-2 col-xs-3">
						<p:selectCheckboxMenu id="multiple2" value="#{graficosEstBean.filtroBusqueda.selectedInteger1}" filter="true" filterMatchMode="startsWith" label="&nbsp;">							
							<f:selectItems value="#{graficosEstBean.lstTipoHabitacion}" var="hab" itemLabel="#{hab.nombre}" itemValue="#{hab.id}"/> 
						</p:selectCheckboxMenu>
					</div>
					<div class="form-group col-md-12 col-sm-12 col-xs-12 text-center">
						<p:commandButton value="BUSCAR" action="#{graficosEstBean.buscar}" update=":form_GraficosReservas" />
					</div>
					<div class="col-md-12 col-sm-12 col-xs-12">
						<p:chart type="line" model="#{graficosEstBean.dateModel}" style="height:400px;" responsive="true"/>
					</div>				
				</div>
				

				<h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5" id="pnl_RP" >
					
                        <p:outputLabel  for="console" value="Ver por : " />
                        <p:selectOneRadio id="console" value="#{estadisticaBean.valor}" >
                            <f:selectItem itemLabel="Día" itemValue="1" />
                            <f:selectItem itemLabel="Mes" itemValue="2" />
                            <f:selectItem itemLabel="Año" itemValue="3" />
                            <p:ajax update="form_GraficosReservas" event="valueChange" listener="#{estadisticaBean.ELECCION()}"  />

                          </p:selectOneRadio>
                        
                        
                         <p:outputLabel  for="acc" value="Ver por : " />
                         <p:selectOneRadio id="acc" value="#{estadisticaBean.accion}" >
                            <f:selectItem itemLabel="Cant. Reservas" itemValue="1" />
                            <f:selectItem itemLabel="Cant. Personas" itemValue="2" />
                            <f:selectItem itemLabel="Tipo de Habitaciones" itemValue="3" />
                            <p:ajax update="form_GraficosReservas" event="valueChange" listener="#{estadisticaBean.ELECCION()}"  />

                          </p:selectOneRadio>
                </h:panelGrid>
                     <p:chart type="bar" model="#{estadisticaBean.barra}" id="barraDia"  rendered="#{estadisticaBean.valor eq 1}" style="height: 400px;" />
                     <p:chart type="bar" model="#{estadisticaBean.barraMeses}" id="barraMes" rendered="#{estadisticaBean.valor eq 2}" style="height: 400px;"  />
                     <p:chart type="bar" model="#{estadisticaBean.barraAnual}" id="barraAnual" rendered="#{estadisticaBean.valor eq 3}" style="height: 400px;"  />
              
            </h:form>
                
                
            </ui:define>

            <ui:define name="bottom">
                 
            </ui:define>

        </ui:composition>

    </body>
</html>